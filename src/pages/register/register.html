<ion-header>
  <ion-navbar>
    <ion-title>YouLike App</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding class="pane">
  <h2>New User Registration</h2>

<form [formGroup]="loginForm" novalidate (ngSubmit)="addUser()" class="form">
  <ion-item>
    <ion-label color="primary" stacked>Username</ion-label>
    <ion-input formControlName="username" class="inputField" placeholder="Please enter username" (input)="checkIfUserExistsOnDB()" ></ion-input>
  </ion-item>

  <div [hidden]="!loginForm.get('username').hasError('minlength') || loginForm.controls.username.pristine"
      class="error">
    Username should contain at least 6 characters!
  </div>

    <div [hidden]="!loginForm.get('username').hasError('pattern') || loginForm.controls.username.pristine"
      class="error">
    Username contains illegal characters!
  </div>

   <div [hidden]="!usernameAlreadyExists" class="error">
     <img src="/assets/redX.svg" class="redX"/>
     Username Already exists!
    </div>

    <ion-item>
    <ion-label color="primary"stacked>Password</ion-label>
    <ion-input formControlName="password" class="inputField" type="password" placeholder="Please enter password"  (input)="checkMatchpasswords()" ></ion-input>
  </ion-item>

  <div [hidden]="loginForm.controls.password.valid || loginForm.controls.password.pristine"
      class="error">
    Password should contain at least 6 characters!
  </div>

    <ion-item>
    <ion-label color="primary" stacked>Repeat Password</ion-label>
    <ion-input formControlName="confirm" class="inputField" type="password" placeholder="Please enter password again" (input)="checkMatchpasswords()"></ion-input>
  </ion-item>

   <div [hidden]="matchPasswords || loginForm.controls.confirm.pristine"
      class="error">
    Passwords don't match!
  </div>

  <ion-item>
    <ion-label color="primary" stacked>Birth Date</ion-label>
    <ion-input formControlName="birthdate" class="inputField" type="date" placeholder="Please enter your birthdate"></ion-input>
  </ion-item>

   <div [hidden]="!loginForm.controls.birthdate.hasError('dateValid') || loginForm.controls.birthdate.pristine"
      class="error">
    Birthdate must be before today!
  </div>

  <ion-item>
    <ion-label color="primary" stacked>First Name</ion-label>
    <ion-input formControlName="firstName" class="inputField" type="text" placeholder="Please enter your first name" ></ion-input>
  </ion-item>

  <div [hidden]="!loginForm.controls.firstName.hasError('minlength') || loginForm.controls.firstName.pristine"
      class="error">
    First Name should contain at least 3 characters!
  </div>

     <div [hidden]="!loginForm.controls.firstName.hasError('pattern') || loginForm.controls.firstName.pristine"
      class="error">
    First name contains illegal characters!
  </div>

<ion-item>
    <ion-label color="primary" stacked>Last Name</ion-label>
    <ion-input formControlName="lastName" class="inputField" type="text" placeholder="Please enter your first name"></ion-input>
  </ion-item>

  <div [hidden]="!loginForm.controls.lastName.hasError('minlength') || loginForm.controls.lastName.pristine"
      class="error">
    Last Name should contain at least 3 characters!
  </div>

  <div [hidden]="!loginForm.controls.lastName.hasError('pattern') || loginForm.controls.lastName.pristine"
      class="error">
    Last name contains illegal characters!
  </div>

  <ion-item>
    <ion-label color="primary" stacked>City</ion-label>
    <ion-input formControlName="city" class="inputField" type="text" placeholder="Please enter your first name" ></ion-input>
  </ion-item>

  <div [hidden]="loginForm.controls.city.valid || loginForm.controls.city.pristine"
      class="error">
    City should contain at least 3 characters!
  </div>

  <ion-item>
  <ion-label color="primary" stacked>Country</ion-label>
  <ion-select formControlName="country">
    <ion-option value="israel" >Israel</ion-option>
    <ion-option value="Italy" >Italy</ion-option>
    <ion-option value="France" >France</ion-option>
  </ion-select>
</ion-item>

 <button ion-button block type="submit" [disabled]="!loginForm.valid">Submit</button>
   </form>

</ion-content>
